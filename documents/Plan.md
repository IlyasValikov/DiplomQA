# План по тестирования веб-сервиса тур-оператора.

**Цель:** Автоматизировать различные сценарии покупки тура.
# 1. Виды планируемых тестов
## 1.1 UI-tests
### Первый сценарий:
1. Открыть страницу http://localhost:8080/;
1. Нажать кнопку `Купить`;
1. Ввести номер карты со статусом APPROVED: 4444 4444 4444 4441;
1. Остальные поля заполнить корректными/*некорректными* значениями;
1. Нажать кнопку `Продолжить`;
1. Появление сообщения по результату заполнения данных.

### Второй сценарий:
1. Открыть страницу http://localhost:8080/;
1. Нажать кнопку `Купить в кредит`;
1. Ввести номер карты со статусом APPROVED: 4444 4444 4444 4441;
1. Остальные поля заполнить корректными/*некорректными* значениями;
1. Нажать кнопку `Продолжить`;
1. Появление сообщения по результату заполнения данных.

### Третий сценарий:
1. Открыть страницу http://localhost:8080/;
1. Нажать кнопку `Купить`;
1. Ввести номер карты со статусом DECLINED: 4444 4444 4444 4442;
1. Остальные поля заполнить корректными/*некорректными* значениями;
1. Нажать кнопку `Продолжить`;
1. Появление сообщения по результату заполнения данных.

### Четвёртый сценарий:
1. Открыть страницу http://localhost:8080/;
1. Нажать кнопку `Купить в кредит`;
1. Ввести номер карты со статусом DECLINED: 4444 4444 4444 4442;
1. Остальные поля заполнить корректными/*некорректными* значениями;
1. Нажать кнопку `Продолжить`;
1. Появление сообщения по результату заполнения данных.

## 1.2. Тестирование валидности отдельных полей:
Данные для тестирования вышеуказанных сценариев.
#### Корректные тестовые данные:
1. **"Номер карты":**
    * Цифры;
    * Длина значения 16 цифр.

1. **"Месяц":**
    * Цифры;
    * Диапазон значений от 01 до 12.
    
1. **"Год":**
    * Цифры;
    * Диапазон значений от 20 до 25.
    
1. **"Владелец":**
    * Латиница (Ivan Ivanov);
    * Длина значения от 3 до 64 символов;
    * Допустимые спецсимволы: пробел, дефис.
    
1. **"CVV":**
    * Цифры;
    * Диапазон значений от 001 до 999.
   
#### Некорректные тестовые данные для негативных тестов:
1. **"Номер карты":**
    * Поле пустое;
    * Длина значения менее 16 цифр;
    * Длина значения более 16 цирф;
    * Номера карты нет в БД банка.

1. **"Месяц":**
    * Поле пустое;
    * Состоит из одной цифры;
    * Значение больше 12;
    * Значение равно 00.
    
1. **"Год":**
    * Поле пустое;
    * Состоит из одной цифры;
    * Значение меньше текущего года (менее 20);
    * Значение на 5+ лет больше текущего года (более 25);
    * Значение равно 00.
    
1. **"Владелец":**
    * Поле пустое;
    * Значение состоит из одного слова;
    * Значение состоиз из более чем двух слов
    * Поле содержит кириллицу;
    * Поле содержит цифры;
    * Поле содержит спецсимволы кроме допустимых (пробел, дефис).
    
1. **"CVV":**
    * Поле пустое;
    * Состоит из одной цифры;
    * Состоит из двух цифр.
  

## 1.3 API tests
Необходимо убедиться, что при попытке обратиться к приложению через API сервис отдает те же данные, что и при UI-тестах. Для этого будут необходимы 4 теста, которые проверяют разные карты и статус этих карт в БД при обращении напрямую к Payment Gate и Credit Gate.

<em>Условия для валидной карты(APPROVED):</em> 

"Номер" = "4444 4444 4444 4441", "Месяц" = "10", "Год" = "22", "Владелец" = "Ivanov Petr", "CVV" = "111".

<em>Условия для валидной карты(DECLINED):</em> 

"Номер" = "4444 4444 4444 4442", "Месяц" = "10", "Год" = "22", "Владелец" = "Ivanov Petr", "CVV" = "111".

**Тест-кейсы**
1. Удостоверяемся, что при обращении к URL-адресу http://localhost:8080/api/v1/pay мы получаем код ответа сервера 200 и банковская карта c номером "4444 4444 4444 4441" отдает статус APPROVED.
2. Удостоверяемся, что при обращении к URL-адресу http://localhost:8080/api/v1/pay мы получаем код ответа сервера 200 и банковская карта с номером "4444 4444 4444 4442" отдает статус DECLINED.
3. Удостоверяемся, что при обращении к URL-адресу http://localhost:8080/api/v1/credit мы получаем код ответа сервера 200 и банковская карта c номером "4444 4444 4444 4441" отдает статус APPROVED.
4. Удостоверяемся, что при обращении к URL-адресу http://localhost:8080/api/v1/credit мы получаем код ответа сервера 200 и банковская карта с номером "4444 4444 4444 4442" отдает статус DECLINED.

# 2. Перечень используемых инструментов с обоснованием выбора
1. **"Java 11"**  
Универсальный язык, позволяющий работать на большинстве ОС и различном оборудовании.
1. **"IntelliJ IDEA: Ultimate Edition"**  
Многофункциональная среда разработки. Удобный рабочий интерфейс. Хорошая интеграция в GitHub, множество поддерживаемых расширений и плагинов для тестирования.
1. **"Git"**  
Система контроля версий. Бсплатность, возможность параллельной разработки, хорошая интеграция с IntelliJ IDEA.
1. **"JUnit5"**  
Тестовый фреймворк, совместимый с JVM и IntelliJ IDEA, содержит все необходимые аннотации.
1. **"Gradle"**  
Система сборки проекта. Имеет простой и понятный код, небольшого объема, в сравнению с Maven. Проще подключать внешние зависимости. А также Gradle из коробки включает отчёты,
которые хорошо выглядят:
1. **"Lombok"**  
Плагин для создания аннотаций, заменяющих значительное количество однообразных конструкторов JAVA таких как getters, setters и пр.
1. **"Selenide"**  
Фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver. Подключение веб-драйвера происходит автоматически, простое написание кода тестов.
1. **"JavaFaker"**  
Плагин для генерации случайных данных для тестов. Болшое количество настроек, бесплатный, достаточная локализация для России.
1. **"Docker"**
Система контейризации. Будет использована для имитации работы IT-системы банка посредством развёртывания БД MySQL и PostgreSQL, а также запуск самого приложения через Node.js. 


# 3. Перечень необходимых разрешений/данных/доступов
1. Разрешение на автоматизацию тестирования;
2. Доступ на чтения БД;

# 4. Перечень и описание возможных рисков при автоматизации
1. Сложности с запуском и настройкой SUT.
1. Сложности с настройкой автотестов при отсутствии уникальных css-селекторов в приложении.
1. Изменение структуры рабочего сайта (правка дизайна с изменением html, css) в будущем приведёт к неработоспособности текущих автотестов.

# 5. Перечень необходимых специалистов для автоматизации
Данный проект не имеет большой сложности, будет достаточно Junior QA с навыками автоматизации, который знаком с
основами необходимого инструментария, основами UI и API тестирования, базовыми навыками написания автотестов с использованием
паттерна Page Object и знанием необходимого языка программирования.

# 6. Интервальная оценка с учётом рисков (в часах)
1. *Планирование автоматизации тестирования:* 4-5 часов;
1. *Написание кода тестов:* 24-36 часов; 
1. *Подготовка отчётных документов по итогам проведенного тестирования:* 2-4 часа;
1. *Подготовка отчётных документов по итогам автоматизации:* 4-5 часов;

# 7. План сдачи Дипломной работы
1. *Готовность авто-тестов:* через 4 рабочих дня после утверждения плана тестирования;
1. *Подготовка отчетов по результатам прогона тестов:* через 1 день после прогона тестов;
1. *Подготовка отчета по итогам автоматизации:* на следущий день после отчетов по прогону тестов.
